<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    <title>Cadastro - Shopee Delivery Partners</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/assets/index-BRHWOuev.css">
    <script>
      // Código JavaScript para a página de cadastro
      window.onload = function() {
        let tipoVeiculo = null;
        let isSubmitting = false;
        let showLoadingModal = false;

        // Formatação de CPF
        function formatCpf(value) {
          const numericValue = value.replace(/\D/g, '');
          if (numericValue.length <= 3) return numericValue;
          if (numericValue.length <= 6) return `${numericValue.slice(0, 3)}.${numericValue.slice(3)}`;
          if (numericValue.length <= 9) return `${numericValue.slice(0, 3)}.${numericValue.slice(3, 6)}.${numericValue.slice(6)}`;
          return `${numericValue.slice(0, 3)}.${numericValue.slice(3, 6)}.${numericValue.slice(6, 9)}-${numericValue.slice(9, 11)}`;
        };

        // Formatação de telefone
        function formatTelefone(value) {
          const numericValue = value.replace(/\D/g, '');
          if (numericValue.length <= 2) return numericValue;
          if (numericValue.length <= 6) return `(${numericValue.slice(0, 2)}) ${numericValue.slice(2)}`;
          if (numericValue.length <= 10) return `(${numericValue.slice(0, 2)}) ${numericValue.slice(2, 6)}-${numericValue.slice(6)}`;
          return `(${numericValue.slice(0, 2)}) ${numericValue.slice(2, 7)}-${numericValue.slice(7)}`;
        };

        // Formatação da placa no formato XXX-0000 (antigo) ou AAA0A00 (Mercosul)
        function formatPlaca(value) {
          value = value.toUpperCase();
          const cleanValue = value.replace(/[^A-Z0-9]/g, '');
          
          if (cleanValue.length <= 3) {
            return cleanValue;
          } else if (cleanValue.length === 7) {
            // Verifica se é formato antigo (3 letras + 4 números)
            if (/^[A-Z]{3}[0-9]{4}$/.test(cleanValue)) {
              // Formato antigo XXX-0000
              return `${cleanValue.slice(0, 3)}-${cleanValue.slice(3)}`;
            } 
            // Formato Mercosul
            else if (/^[A-Z]{3}[0-9][A-Z][0-9]{2}$/.test(cleanValue)) {
              // Não formata com hífen, apenas retorna
              return cleanValue;
            }
            // Outro formato de 7 caracteres - aplica o hífen comum
            else {
              return `${cleanValue.slice(0, 3)}-${cleanValue.slice(3)}`;
            }
          } else {
            // Para outros comprimentos, retorna o valor limpo
            return cleanValue;
          }
        };

        // Handlers para formatação automática
        const handleCpfChange = (e) => {
          const formatted = formatCpf(e.target.value);
          e.target.value = formatted;
        };

        const handleTelefoneChange = (e) => {
          const formatted = formatTelefone(e.target.value);
          e.target.value = formatted;
        };

        const handlePlacaChange = (e) => {
          const formatted = formatPlaca(e.target.value);
          e.target.value = formatted;
        };

        // Setup do seletor de tipo de veículo
        const setupTipoVeiculo = () => {
          const carroButton = document.getElementById('veiculo-carro');
          const motoButton = document.getElementById('veiculo-moto');
          
          if (carroButton) {
            carroButton.addEventListener('click', function() {
              tipoVeiculo = "carro";
              carroButton.classList.add('border-[#E83D22]', 'border-3', 'bg-[#FFF8F6]');
              carroButton.classList.remove('border-gray-200', 'border-2', 'bg-white', 'hover:bg-gray-50');
              document.getElementById('carro-text').classList.add('text-[#E83D22]');
              document.getElementById('carro-text').classList.remove('text-gray-700');
              
              // Desmarcar o outro botão
              if (motoButton) {
                motoButton.classList.remove('border-[#E83D22]', 'border-3', 'bg-[#FFF8F6]');
                motoButton.classList.add('border-gray-200', 'border-2', 'bg-white', 'hover:bg-gray-50');
                document.getElementById('moto-text').classList.remove('text-[#E83D22]');
                document.getElementById('moto-text').classList.add('text-gray-700');
              }
            });
          }
          
          if (motoButton) {
            motoButton.addEventListener('click', function() {
              tipoVeiculo = "moto";
              motoButton.classList.add('border-[#E83D22]', 'border-3', 'bg-[#FFF8F6]');
              motoButton.classList.remove('border-gray-200', 'border-2', 'bg-white', 'hover:bg-gray-50');
              document.getElementById('moto-text').classList.add('text-[#E83D22]');
              document.getElementById('moto-text').classList.remove('text-gray-700');
              
              // Desmarcar o outro botão
              if (carroButton) {
                carroButton.classList.remove('border-[#E83D22]', 'border-3', 'bg-[#FFF8F6]');
                carroButton.classList.add('border-gray-200', 'border-2', 'bg-white', 'hover:bg-gray-50');
                document.getElementById('carro-text').classList.remove('text-[#E83D22]');
                document.getElementById('carro-text').classList.add('text-gray-700');
              }
            });
          }
        };

        // Setup do formulário
        const setupFormSubmit = () => {
          const form = document.getElementById('cadastro-form');
          
          if (form) {
            form.addEventListener('submit', function(e) {
              e.preventDefault();
              
              // Validar campos
              const cpf = document.getElementById('cpf').value;
              const nome = document.getElementById('nome').value;
              const telefone = document.getElementById('telefone').value;
              const email = document.getElementById('email').value;
              const placa = document.getElementById('placa').value;
              
              // Validação básica
              if (!cpf || cpf.replace(/\D/g, '').length !== 11) {
                showError('cpf-error', 'CPF inválido');
                return;
              }
              
              if (!nome || nome.length < 3) {
                showError('nome-error', 'Nome deve ter pelo menos 3 caracteres');
                return;
              }
              
              if (!telefone || telefone.replace(/\D/g, '').length < 10) {
                showError('telefone-error', 'Telefone inválido');
                return;
              }
              
              if (!email || !email.includes('@')) {
                showError('email-error', 'Email inválido');
                return;
              }
              
              if (!tipoVeiculo) {
                alert('Selecione o tipo de veículo (Carro ou Moto)');
                return;
              }
              
              if (!placa) {
                showError('placa-error', 'Placa inválida');
                return;
              }
              
              // Recuperar CEP data
              const cepData = JSON.parse(localStorage.getItem('shopee_delivery_cep_data'));
              if (!cepData) {
                alert('Informações de CEP não encontradas. Por favor, recarregue a página e informe seu CEP.');
                return;
              }
              
              // Processamento do formulário
              isSubmitting = true;
              document.getElementById('submit-button').innerText = 'Processando...';
              document.getElementById('submit-button').disabled = true;
              
              try {
                // Armazenar dados no localStorage para uso posterior
                const candidatoData = {
                  cpf: cpf,
                  nome: nome,
                  telefone: telefone,
                  email: email,
                  placa: placa,
                  tipoVeiculo: tipoVeiculo,
                  estado: cepData.state,
                  cidade: cepData.city,
                  cep: cepData.cep
                };

                localStorage.setItem('candidato_data', JSON.stringify(candidatoData));
                
                // Salvar os dados do usuário para mostrar na página de entrega
                localStorage.setItem('user_data', JSON.stringify({
                  nome: nome,
                  cpf: cpf
                }));
                
                // Mostrar o modal de carregamento
                showLoadingModal = true;
                document.getElementById('loading-modal').style.display = 'flex';
                
                // Iniciar processo de carregamento
                startLoadingProcess();
                
              } catch (error) {
                isSubmitting = false;
                document.getElementById('submit-button').innerText = 'Prosseguir';
                document.getElementById('submit-button').disabled = false;
                alert('Ocorreu um erro ao processar seu cadastro. Tente novamente.');
              }
            });
          }
        };

        // Função para mostrar erros de validação
        function showError(elementId, message) {
          const errorElement = document.getElementById(elementId);
          if (errorElement) {
            errorElement.textContent = message;
            errorElement.style.display = 'block';
          }
        }

        // Limpar erros quando o campo é alterado
        function setupErrorClearing() {
          const inputs = document.querySelectorAll('input');
          inputs.forEach(input => {
            input.addEventListener('input', function() {
              const errorId = input.id + '-error';
              const errorElement = document.getElementById(errorId);
              if (errorElement) {
                errorElement.style.display = 'none';
              }
            });
          });
        }

        // Configurar processo de carregamento
        function startLoadingProcess() {
          // Passos do carregamento
          const loadingSteps = [
            "Verificando dados do CPF",
            "Consultando Carteira de Motorista",
            "Validando documentação do veículo",
            "Analisando disponibilidade na região",
            "Verificando histórico de entregas"
          ];
          
          const stepsContainer = document.getElementById('loading-steps');
          const progressBar = document.getElementById('loading-progress');
          const completionMessage = document.getElementById('completion-message');
          
          // Limpar steps anteriores
          stepsContainer.innerHTML = '';
          
          // Criar elementos para cada passo
          loadingSteps.forEach((step, index) => {
            const stepElement = document.createElement('div');
            stepElement.className = 'loading-step';
            stepElement.id = `loading-step-${index}`;
            stepElement.innerHTML = `
              <div class="step-indicator">
                <div class="step-circle"></div>
                <div class="step-line ${index === loadingSteps.length - 1 ? 'hidden' : ''}"></div>
              </div>
              <div class="step-content">
                <p>${step}</p>
              </div>
            `;
            stepsContainer.appendChild(stepElement);
          });
          
          // Atualizar progressivamente
          let currentStep = 0;
          const stepTime = 1400; // 1.4 segundos por etapa
          
          function updateProgress() {
            if (currentStep < loadingSteps.length) {
              // Atualizar o círculo do passo atual
              const stepCircle = document.querySelector(`#loading-step-${currentStep} .step-circle`);
              stepCircle.classList.add('completed');
              
              // Atualizar a barra de progresso
              const progressPct = ((currentStep + 1) / loadingSteps.length) * 100;
              progressBar.style.width = `${progressPct}%`;
              
              currentStep++;
              
              if (currentStep < loadingSteps.length) {
                // Passar para o próximo passo
                setTimeout(updateProgress, stepTime);
              } else {
                // Concluído
                setTimeout(showCompletion, 1000);
              }
            }
          }
          
          function showCompletion() {
            completionMessage.style.display = 'block';
            document.getElementById('complete-button').style.display = 'block';
          }
          
          // Iniciar o processo
          setTimeout(updateProgress, 1000);
        }

        // Configurar o botão de conclusão
        function setupCompleteButton() {
          const completeButton = document.getElementById('complete-button');
          if (completeButton) {
            completeButton.addEventListener('click', function() {
              window.location.href = '/municipios';
            });
          }
        }

        // Adicionar event listeners para formatação dos campos
        const cpfInput = document.getElementById('cpf');
        if (cpfInput) cpfInput.addEventListener('input', handleCpfChange);
        
        const telefoneInput = document.getElementById('telefone');
        if (telefoneInput) telefoneInput.addEventListener('input', handleTelefoneChange);
        
        const placaInput = document.getElementById('placa');
        if (placaInput) placaInput.addEventListener('input', handlePlacaChange);
        
        // Inicializar todas as funcionalidades
        setupTipoVeiculo();
        setupFormSubmit();
        setupErrorClearing();
        setupCompleteButton();
      };
    </script>
    <style>
      /* Estilos específicos para o modal de carregamento */
      .loading-step {
        display: flex;
        margin-bottom: 20px;
      }
      
      .step-indicator {
        display: flex;
        flex-direction: column;
        align-items: center;
        margin-right: 15px;
      }
      
      .step-circle {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 2px solid #ccc;
        background-color: white;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
      }
      
      .step-circle.completed {
        border-color: #E83D22;
        background-color: #E83D22;
      }
      
      .step-circle.completed::after {
        content: '✓';
        color: white;
        font-size: 14px;
      }
      
      .step-line {
        width: 2px;
        height: 30px;
        background-color: #ccc;
        margin-top: 4px;
      }
      
      .step-content {
        flex: 1;
      }
      
      .progress-bar-container {
        width: 100%;
        height: 6px;
        background-color: #eee;
        border-radius: 3px;
        margin-bottom: 20px;
        overflow: hidden;
      }
      
      .progress-bar {
        height: 100%;
        background-color: #E83D22;
        width: 0;
        transition: width 0.5s ease;
      }
    </style>
  </head>
  <body>
    <div class="bg-white min-h-screen flex flex-col">
      <!-- Header -->
      <header class="bg-white shadow-md">
        <div class="container mx-auto px-4 py-4 flex items-center justify-between">
          <a href="/">
            <img 
              src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Shopee.svg/2560px-Shopee.svg.png" 
              alt="Shopee Logo" 
              class="h-8 cursor-pointer"
            />
          </a>
          <div class="hamburger-menu cursor-pointer">
            <div class="hamburger-line w-[16px] h-[3px] bg-[#EE4D2D] my-1 transition-all duration-400"></div>
            <div class="hamburger-line w-[20px] h-[3px] bg-[#EE4D2D] my-1 transition-all duration-400"></div>
            <div class="hamburger-line w-[24px] h-[3px] bg-[#EE4D2D] my-1 transition-all duration-400"></div>
          </div>
        </div>
      </header>
      
      <!-- Sub-header -->
      <div class="w-full bg-[#EE4E2E] py-1 px-6 flex items-center relative overflow-hidden">
        <!-- Meia-lua no canto direito -->
        <div class="absolute right-0 top-0 bottom-0 w-32 h-full rounded-l-full bg-[#E83D22]"></div>
        
        <div class="flex items-center relative z-10">
          <div class="text-white mr-3">
            <i class="fas fa-chevron-right text-3xl font-black" style="color: white;"></i>
          </div>
          <div class="leading-none">
            <h1 class="text-base font-bold text-white mb-0">Motorista Parceiro</h1>
            <p class="text-white text-sm mt-0" style="transform: translateY(-2px);">Shopee</p>
          </div>
        </div>
      </div>
      
      <!-- Main Content -->
      <div class="flex-grow container mx-auto px-2 py-8 w-full">
        <div class="w-full mx-auto p-6 mb-8">
          <h1 class="text-3xl font-bold text-center mb-8 text-gray-800">Cadastro de Entregador Parceiro</h1>
          
          <form id="cadastro-form" class="space-y-6">
            <div class="space-y-4">
              <div>
                <label for="cpf" class="block text-base font-medium text-gray-800 mb-2">
                  CPF
                </label>
                <input
                  id="cpf"
                  type="text"
                  placeholder="000.000.000-00"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md"
                  inputmode="numeric"
                />
                <p id="cpf-error" class="mt-1 text-sm text-red-600" style="display: none;"></p>
              </div>

              <div>
                <label for="nome" class="block text-base font-medium text-gray-800 mb-2">
                  Nome Completo
                </label>
                <input
                  id="nome"
                  type="text"
                  placeholder="Digite seu nome completo"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md"
                />
                <p id="nome-error" class="mt-1 text-sm text-red-600" style="display: none;"></p>
              </div>

              <div>
                <label for="telefone" class="block text-base font-medium text-gray-800 mb-2">
                  Telefone
                </label>
                <input
                  id="telefone"
                  type="text"
                  placeholder="(00) 00000-0000"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md"
                  inputmode="numeric"
                />
                <p id="telefone-error" class="mt-1 text-sm text-red-600" style="display: none;"></p>
              </div>

              <div>
                <label for="email" class="block text-base font-medium text-gray-800 mb-2">
                  E-mail
                </label>
                <input
                  id="email"
                  type="email"
                  placeholder="seu@email.com"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md"
                />
                <p id="email-error" class="mt-1 text-sm text-red-600" style="display: none;"></p>
              </div>

              <div class="pt-4">
                <label class="block text-lg font-medium text-gray-800 mb-4">
                  Qual veículo você utiliza?
                </label>
                <div class="grid grid-cols-2 gap-4">
                  <button
                    type="button"
                    id="veiculo-carro"
                    class="flex flex-col items-center justify-center p-6 border-gray-200 border-2 bg-white hover:bg-gray-50 rounded-lg transition-colors"
                  >
                    <div class="mb-3 h-24 flex items-center justify-center">
                      <img src="/assets/shopee-cars-BEd8cnmS.webp" alt="Carros Shopee" class="h-full w-auto object-contain" />
                    </div>
                    <span id="carro-text" class="font-medium text-gray-700">
                      Carro
                    </span>
                  </button>
                  
                  <button
                    type="button"
                    id="veiculo-moto"
                    class="flex flex-col items-center justify-center p-6 border-gray-200 border-2 bg-white hover:bg-gray-50 rounded-lg transition-colors"
                  >
                    <div class="mb-3 h-20 flex items-center justify-center">
                      <img src="/assets/shopee-moto-g9ZTW-iH.webp" alt="Moto Shopee" class="h-full object-contain" />
                    </div>
                    <span id="moto-text" class="font-medium text-gray-700">
                      Moto
                    </span>
                  </button>
                </div>
              </div>

              <div class="pt-2">
                <label for="placa" class="block text-base font-medium text-gray-800 mb-2">
                  Placa do Veículo
                </label>
                <input
                  id="placa"
                  type="text"
                  placeholder="ABC-1234 ou ABC1D23"
                  class="w-full px-3 py-2 border border-gray-300 rounded-md"
                />
                <p id="placa-error" class="mt-1 text-sm text-red-600" style="display: none;"></p>
              </div>
            </div>

            <button
              id="submit-button"
              type="submit"
              class="w-full bg-[#E83D22] hover:bg-[#d73920] text-white font-medium py-6 text-base rounded-[3px]"
              style="height: 50px"
            >
              Prosseguir
            </button>
          </form>
        </div>
      </div>
      
      <!-- Footer -->
      <footer class="bg-gray-800 text-white py-10">
        <div class="container mx-auto px-4">
          <div class="flex flex-col md:flex-row justify-between">
            <div class="mb-6 md:mb-0">
              <img 
                src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/fe/Shopee.svg/2560px-Shopee.svg.png" 
                alt="Shopee Logo" 
                class="h-8 mb-4"
              />
              <p class="text-gray-400 max-w-md">A Shopee é a plataforma de e-commerce líder no Sudeste Asiático e Taiwan, e está em rápida expansão no Brasil.</p>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-3 gap-8">
              <div>
                <h3 class="text-lg font-semibold mb-4">Entregador</h3>
                <ul class="space-y-2">
                  <li><a href="#" class="text-gray-400 hover:text-white">Como se cadastrar</a></li>
                  <li><a href="#" class="text-gray-400 hover:text-white">Requisitos</a></li>
                  <li><a href="#" class="text-gray-400 hover:text-white">Pagamentos</a></li>
                  <li><a href="#" class="text-gray-400 hover:text-white">Benefícios</a></li>
                </ul>
              </div>
              
              <div>
                <h3 class="text-lg font-semibold mb-4">Shopee</h3>
                <ul class="space-y-2">
                  <li><a href="#" class="text-gray-400 hover:text-white">Sobre nós</a></li>
                  <li><a href="#" class="text-gray-400 hover:text-white">Carreiras</a></li>
                  <li><a href="#" class="text-gray-400 hover:text-white">Notícias</a></li>
                  <li><a href="#" class="text-gray-400 hover:text-white">Sustentabilidade</a></li>
                </ul>
              </div>
              
              <div>
                <h3 class="text-lg font-semibold mb-4">Suporte</h3>
                <ul class="space-y-2">
                  <li><a href="#" class="text-gray-400 hover:text-white">Ajuda</a></li>
                  <li><a href="#" class="text-gray-400 hover:text-white">Contato</a></li>
                  <li><a href="#" class="text-gray-400 hover:text-white">FAQ</a></li>
                </ul>
              </div>
            </div>
          </div>
          
          <div class="border-t border-gray-700 mt-10 pt-6 flex flex-col md:flex-row justify-between items-center">
            <p class="text-gray-400 text-sm">&copy; 2025 Shopee. Todos os direitos reservados.</p>
            <div class="mt-4 md:mt-0">
              <ul class="flex space-x-4">
                <li><a href="#" class="text-gray-400 hover:text-white">Termos de Uso</a></li>
                <li><a href="#" class="text-gray-400 hover:text-white">Privacidade</a></li>
                <li><a href="#" class="text-gray-400 hover:text-white">Cookies</a></li>
              </ul>
            </div>
          </div>
        </div>
      </footer>
      
      <!-- Loading Modal -->
      <div id="loading-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60" style="display: none;">
        <div class="bg-white rounded-lg p-8 max-w-md w-full">
          <h3 class="text-2xl font-bold mb-4">Verificando Cadastro</h3>
          
          <div class="progress-bar-container">
            <div id="loading-progress" class="progress-bar"></div>
          </div>
          
          <div id="loading-steps" class="mb-6">
            <!-- Passos serão inseridos via JavaScript -->
          </div>
          
          <div id="completion-message" class="bg-green-50 p-4 rounded-md border border-green-100 mb-4 text-center" style="display: none;">
            <p class="text-green-800">
              Seus dados foram validados com sucesso! Você está apto a ser um Entregador Parceiro Shopee.
            </p>
          </div>
          
          <button 
            id="complete-button" 
            class="w-full bg-[#E83D22] hover:bg-[#d73920] text-white py-3 px-4 rounded-md"
            style="display: none;"
          >
            Continuar
          </button>
        </div>
      </div>
    </div>
  </body>
</html>